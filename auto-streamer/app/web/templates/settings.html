{% extends "base.html" %}

{% block header %}Settings{% endblock %}

{% block content %}
<div class="bg-white p-8 rounded-lg shadow-md">
    <h2 class="text-2xl font-bold mb-6">Configuration</h2>

    <div class="mb-6">
        <p class="text-gray-700">
            This interface provides a way to view and test the current configuration.
            Editing the configuration directly via the API is a planned feature. For now, please edit the
            <code class="bg-gray-200 text-sm p-1 rounded">config.json</code> file and restart the server.
        </p>
    </div>

    <div id="config-editor" class="bg-gray-50 p-4 rounded-lg border border-gray-200">
        <h3 class="font-bold text-lg mb-4">Current <code class="text-sm">config.json</code> (Secrets Masked)</h3>
        <pre
            class="whitespace-pre-wrap text-sm text-gray-800 max-h-96 overflow-y-auto"
            hx-get="/api/v1/config"
            hx-trigger="load"
            hx-swap="innerHTML">Loading configuration...</pre>
    </div>

    <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
        <button
            hx-post="/api/v1/config/test/scraper"
            hx-swap="none"
            class="bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-indigo-700 transition duration-300">
            Test Scraper
        </button>
        <button
            hx-post="/api/v1/config/test/tts"
            hx-swap="none"
            class="bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-indigo-700 transition duration-300">
            Test TTS
        </button>
        <button
            hx-post="/api/v1/config/test/rtmp"
            hx-swap="none"
            class="bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-indigo-700 transition duration-300">
            Test RTMP
        </button>
    </div>
    <div id="test-results" class="mt-4 text-center">
        <!-- Results from test buttons will be shown in the SSE log -->
    </div>
</div>
{% endblock %}
